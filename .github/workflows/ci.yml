name: Continious integration

on: [push]

jobs:

    build:
  
      runs-on: ubuntu-latest
  
      steps:
  
        - name: Checkout sources
          uses: actions/checkout@v2

        - name: Download Google Tink
          run: mvn dependency:get -DgroupId=com.google.crypto.tink -DartifactId=tink -Dversion=1.3.0

        - name: Copy Google Tink to current dir
          run: mvn dependency:copy -Dartifact=com.google.crypto.tink:tink:1.3.0 -DoutputDirectory=.
        
        - name: Convert JAR to DEX
          uses: swapii/action-dex-tools@master
          with:
            command: d2j-jar2dex tink-1.3.0.jar

        - name: Convert DEX to smali
          uses: swapii/action-dex-tools@master
          with:
            command: d2j-dex2smali tink-1.3.0-jar2dex.dex

        - name: Convert smali to DEX
          uses: swapii/action-dex-tools@master
          with:
            command: d2j-smali tink-1.3.0-jar2dex-out

        - name: Print current dir files
          run: ls -la .
